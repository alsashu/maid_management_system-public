@{
    ViewData["Title"] = "Search Maid";
    Layout = "~/Views/Shared/_LayoutCustomize.cshtml";
}
<style>
    img.maid-icon {
        bottom: -15px;
        width: 135px;
    }

    #map {
        height: 100%;
    }
</style>


<div class="container">
    <div class="row">
        <div class="col-8">
            <h4 class="page-heading">Find Maid</h4>
            <p>Let us know what you are looking for so that we can give you suggestions </p>
        </div>
        <div class="col-4">
            <div class="maid-box">
                <img src="~/content-mfolio/images/maid.svg" class="maid-icon" alt="">
            </div>
        </div>
    </div>
</div>

<div class="maincontainer innerpage">
    <div class="container">
        <div class="row">
            <div class="col-6">
                <select onchange="handleDropdownChange()" class="select2 form-control" id="subcity" title="Select Location" data-placeholder="--Select Location--">
                    <option value="Adugodi">Adugodi</option>
                    <option value="Agara">Agara</option>
                    <option value="Anjanapura">Anjanapura</option>
                    <option value="Arekere">Arekere</option>
                    <option value="Austin Town">Austin Town</option>
                    <option value="Babusapalya">Babusapalya</option>
                    <option value="Bagalur">Bagalur</option>
                    <option value="Bahubalinagar">Bahubalinagar</option>
                    <option value="Baiyyappanahalli">Baiyyappanahalli</option>
                    <option value="Budigere">Budigere</option>
                    <option value="Banashankari">Banashankari</option>
                    <option value="Banaswadi">Banaswadi</option>
                    <option value="Basavanagudi">Basavanagudi</option>
                    <option value="Basaveshwaranagara">Basaveshwaranagara</option>
                    <option value="Bellandur">Bellandur</option>
                    <option value="Bharathnagar">Bharathnagar</option>
                    <option value="Bilekahalli">Bilekahalli</option>
                    <option value="Binnamangala">Binnamangala</option>
                    <option value="Bommanahalli">Bommanahalli</option>
                    <option value="Bommasandra">Bommasandra</option>
                    <option value="Brookefield">Brookefield</option>
                    <option value="BTM Layout">BTM Layout</option>
                    <option value="Byatarayanapura">Byatarayanapura</option>
                    <option value="Carmelaram">Carmelaram</option>
                    <option value="Chamarajpet">Chamarajpet</option>
                    <option value="Chandapura">Chandapura</option>
                    <option value="Chickpet">Chickpet</option>
                    <option value="Chikkalasandra">Chikkalasandra</option>
                    <option value="Cooke Town">Cooke Town</option>
                    <option value="Cox Town">Cox Town</option>
                    <option value="CV Raman Nagar">CV Raman Nagar</option>
                    <option value="Dasarahalli">Dasarahalli</option>
                    <option value="Devara Jeevanahalli">Devara Jeevanahalli</option>
                    <option value="Devarachikkanahalli">Devarachikkanahalli</option>
                    <option value="Dollars Colony">Dollars Colony</option>
                    <option value="Domlur">Domlur</option>
                    <option value="Ejipura">Ejipura</option>
                    <option value="Electronic City">Electronic City</option>
                    <option value="Fraser Town">Fraser Town</option>
                    <option value="G. M. Palya">G. M. Palya</option>
                    <option value="Gandhi Bazaar">Gandhi Bazaar</option>
                    <option value="Gandhi Nagar">Gandhi Nagar</option>
                    <option value="Gangamma Circle">Gangamma Circle</option>
                    <option value="Ganganagar">Ganganagar</option>
                    <option value="Garudacharpalya">Garudacharpalya</option>
                    <option value="Girinagar">Girinagar</option>
                    <option value="Gottigere">Gottigere</option>
                    <option value="Gowdanapalya">Gowdanapalya</option>
                    <option value="Hanumanthanagar">Hanumanthanagar</option>
                    <option value="Hebbagodi">Hebbagodi</option>
                    <option value="Hebbal">Hebbal</option>
                    <option value="Hoodi">Hoodi</option>
                    <option value="Horamavu">Horamavu</option>
                    <option value="HSR Layout">HSR Layout</option>
                    <option value="Hulimavu">Hulimavu</option>
                    <option value="Immadihalli">Immadihalli</option>
                    <option value="Indiranagar">Indiranagar</option>
                    <option value="Ittamadu">Ittamadu</option>
                    <option value="Jakkasandra">Jakkasandra</option>
                    <option value="Jakkur">Jakkur</option>
                    <option value="Jalahalli">Jalahalli</option>
                    <option value="Jayanagar">Jayanagar</option>
                    <option value="Jayaprakash Nagar">Jayaprakash Nagar</option>
                    <option value="Jeevanbimanagar">Jeevanbimanagar</option>
                    <option value="Jigani">Jigani</option>
                    <option value="Kadugodi">Kadugodi</option>
                    <option value="Kaggadasapura">Kaggadasapura</option>
                    <option value="Kalasipalyam">Kalasipalyam</option>
                    <option value="Kalkere">Kalkere</option>
                    <option value="Kalyan Nagar">Kalyan Nagar</option>
                    <option value="Kamakshipalya">Kamakshipalya</option>
                    <option value="Kammanahalli">Kammanahalli</option>
                    <option value="Kengeri">Kengeri</option>
                    <option value="Kodigehalli">Kodigehalli</option>
                    <option value="Kodihalli">Kodihalli</option>
                    <option value="Konanakunte">Konanakunte</option>
                    <option value="Koppa gate">Koppa gate</option>
                    <option value="Koramangala">Koramangala</option>
                    <option value="Krishnarajapuram">Krishnarajapuram</option>
                    <option value="Kumaraswamy Layout">Kumaraswamy Layout</option>
                    <option value="Kundalahalli">Kundalahalli</option>
                    <option value="Lingarajapuram">Lingarajapuram</option>
                    <option value="Madiwala">Madiwala</option>
                    <option value="Mahadevapura">Mahadevapura</option>
                    <option value="Mahalakshmi Layout">Mahalakshmi Layout</option>
                    <option value="Malleshwaram">Malleshwaram</option>
                    <option value="Marathahalli">Marathahalli</option>
                    <option value="Mariyannapalya">Mariyannapalya</option>
                    <option value="Milk Colony">Milk Colony</option>
                    <option value="Murphy Town">Murphy Town</option>
                    <option value="Murugeshpalya">Murugeshpalya</option>
                    <option value="Muthyalanagar">Muthyalanagar</option>
                    <option value="Nagarbhavi">Nagarbhavi</option>
                    <option value="Nandini Layout">Nandini Layout</option>
                    <option value="Nayandahalli">Nayandahalli</option>
                    <option value="Padmanabhanagar">Padmanabhanagar</option>
                    <option value="Palace Guttahalli">Palace Guttahalli</option>
                    <option value="Peenya">Peenya</option>
                    <option value="Puttenahalli">Puttenahalli</option>
                    <option value="R. T. Nagar">R. T. Nagar</option>
                    <option value="Rajajinagar">Rajajinagar</option>
                    <option value="Rajarajeshwari Nagar">Rajarajeshwari Nagar</option>
                    <option value="Ramachandrapura">Ramachandrapura</option>
                    <option value="Ramagondanahalli">Ramagondanahalli</option>
                    <option value="Ramamurthy Nagar">Ramamurthy Nagar</option>
                    <option value="Ramanjaneyanagar">Ramanjaneyanagar</option>
                    <option value="Richmond Town">Richmond Town</option>
                    <option value="Sadashivanagar">Sadashivanagar</option>
                    <option value="Sahakara Nagar">Sahakara Nagar</option>
                    <option value="Sanjaynagar">Sanjaynagar</option>
                    <option value="Seshadripura">Seshadripura</option>
                    <option value="Shikaripalya">Shikaripalya</option>
                    <option value="Shivajinagar">Shivajinagar</option>
                    <option value="Shree Ananthnagara">Shree Ananthnagara</option>
                    <option value="Siddapura">Siddapura</option>
                    <option value="Singasandra">Singasandra</option>
                    <option value="Suddaguntepalya">Suddaguntepalya</option>
                    <option value="Sulikunte">Sulikunte</option>
                    <option value="Tannery Road">Tannery Road</option>
                    <option value="Thindlu">Thindlu</option>
                    <option value="Thyagarajanagar">Thyagarajanagar</option>
                    <option value="Ulsoor">Ulsoor</option>
                    <option value="Uttarahalli">Uttarahalli</option>
                    <option value="Varthur">Varthur</option>
                    <option value="Vasanth Nagar">Vasanth Nagar</option>
                    <option value="Vidyaranyapura">Vidyaranyapura</option>
                    <option value="Vijayanagar">Vijayanagar</option>
                    <option value="Vimanapura">Vimanapura</option>
                    <option value="Vyalikaval">Vyalikaval</option>
                    <option value="Whitefield">Whitefield</option>
                    <option value="Wilson Garden">Wilson Garden</option>
                    <option value="Yelachenahalli">Yelachenahalli</option>
                    <option value="Yelahanka">Yelahanka</option>
                    <option value="Yeswanthpur">Yeswanthpur</option>
                    <option value="Kattigenahalli">Kattigenahalli</option>
                    <option value="Yemlur">Yemlur</option>
                    <option value="Hennur">Hennur</option>
                    <option value="seetharampalya">seetharampalya</option>
                    <option value="Bannerghatta">Bannerghatta</option>
                    <option value="Sarjapur">Sarjapur</option>
                    <option value="Kudlugate">Kudlugate</option>
                    <option value="Haralur">Haralur</option>
                </select>
            </div>
            <div class="col-6">
                <select onchange="handleDropdownChange()" class="select2 form-control" id="language" multiple title="Select Language" data-placeholder="--Select Language--">
                    @*<option disabled selected>--Select Language--</option>*@
                    <option value="Hindi">Hindi</option>
                    <option value="English">English</option>
                    <option value="Kannada">Kannada</option>
                    <option value="Malayalam">Malayalam</option>
                    <option value="Telugu">Telugu</option>
                    <option value="Tamil">Tamil</option>
                    <option value="Gujarati">Gujarati</option>
                    <option value="Bengali">Bengali</option>
                    <option value="Nepali">Nepali</option>
                    <option value="Punjabi">Punjabi</option>
                    <option value="Assamese">Assamese</option>
                    <option value="Maithili">Maithili</option>
                    <option value="Meitei (Manipuri)">Meitei (Manipuri)</option>
                    <option value="Marathi">Marathi</option>
                    <option value="Nepali">Urdu</option>
                    <option value="Nepali">Odia</option>
                </select>
            </div>
        </div>

        <br />

        <div class="row">
            <div class="col-6">
                <select onchange="handleDropdownChange()" class="select2 form-control" id="services" multiple title="Select Services Offered" data-placeholder="--Select Services Offered--">
                    @*<option disabled selected>--Select Services Offered--</option>*@
                    <option value="Cooking">Cooking</option>
                    <option value="PatientCare">Patient Care</option>
                    <option value="ElderCare">Elder Care</option>
                    <option value="KitchenHelper">Kitchen Helper</option>
                    <option value="BabySitter">Baby Sitter</option>
                    <option value="ClothWashing">Cloth Washing</option>
                    <option value="JapaMaid">Japa Maid</option>
                </select>
            </div>
            <div class="col-6">
                <select onchange="handleDropdownChange()" class="select2 form-control" id="workinghours" multiple title="Select Working Hours" data-placeholder="--Select Working Hours--">
                    <option disabled selected>--Select Working Hours--</option>
                    <option value="PartTime">Part Time ( Hourly basis)</option>
                    <option value="FullTime">FullTime ( 8-10 Hours)</option>
                    <option value="Live_in">Live-in ( 24 hours, Stay with Client)</option>
                </select>
            </div>
        </div>

    </div>

    <div class="form-footer ">
        <div class="container">
            <div class="row ">
                <div class="col-md-12 col-lg-10">

                </div>
                <div class="col-md-12 col-lg-2">
                    @*<div class="form-check">
                        <input class="form-check-input" type="checkbox" id="isSaveSearch" value="isSaveSearch" title="The saved search will be availabe under profile.">
                        <label class="form-check-label" for="isSaveSearch">Save this search.</label>
                    </div>*@
                    @*<button type="submit" class="btn btnmain btn-large search-button">Search</button>*@
                </div>
            </div>
        </div>
    </div>
</div>

<div class="popup-bg"></div>

<div id="search_result" style="display: none;">
    <div class="maincontainer innerpage">
        <div class="container">
            <h1>Search Result</h1>
            <div id="search_row" class="row">

            </div>
        </div>
    </div>
</div>


<script>
    function handleDropdownChange() {
        var subcity = $('#subcity').val();
        console.log("Selected subcity: " + subcity);

        var languages = $('#language').val();
        console.log("Selected languages: " + languages);

        var services = $('#services').val();
        console.log("Selected services: " + services);

        var workinghours = $('#workinghours').val();
        console.log("Selected workinghours: " + workinghours);

        let obj = new Object();
        obj.Location = subcity;
        obj.Services = services;
        obj.Language = languages;
        obj.Working = workinghours;

        $.ajax({
            url: "/business/home/searchworker",
            data: obj,
            cache: true,
            type: "POST",
            success: function (data) {
                var divrow = document.getElementById("search_row");
                divrow.innerHTML = "";

                var div = document.getElementById("search_result");
                div.style.display = "block";

                pdata = JSON.parse(data);
                var inner_html = "";
                for (var i = 0; i < pdata.Records.length; i++) {
                    let servicesAsArray = JSON.parse(pdata.Records[i].services);
                    const servicesAsString = servicesAsArray.join(', ');

                    const img_data = "data:image/;base64," + pdata.Records[i].filedata;

                    let date = new Date(pdata.Records[i].availablefrom);
                    let day = ("0" + date.getDate()).slice(-2);
                    let month = ("0" + (date.getMonth() + 1)).slice(-2);
                    let year = date.getFullYear();
                    let formattedDate = day + "-" + month + "-" + year;

                    //inner_html = inner_html + '<div class="col-md-6 col-lg-4 d-flex align-items-stretch "><div class="maidcard"><div class="row"><div class="col-4 col-sm-5 col-md-4 col-lg-5"><img src="' + img_data + '" alt=""><div class="rating"><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_grey.svg" alt=""></div><div class="review"><a href="#">12 reviews</a></div></div><div class="col-8 col-sm-7 col-md-8 col-lg-7"><div class="details"><span class="name">' + pdata.Records[i].firstname + ' ' + pdata.Records[i].lastname + '</span><span class="age">' + pdata.Records[i].experienceinyears + ' years ' + pdata.Records[i].experienceinmonths + ' months ' + '</span></div><div class="details"><span class="label">Services offered</span><span class="value">' + servicesAsString + '</span></div><div class="details"><span class="label">Available from</span><span class="value">' + formattedDate + '</span></div><a onclick="onViewDetails(\'' + pdata.Records[i].id + '\')" class="btn btn-view-details">View Details</a></div></div></div></div>';
                    inner_html = inner_html + '<div class="col-md-6 col-lg-4 d-flex align-items-stretch "><div class="maidcard"><div class="row"><div class="col-4 col-sm-5 col-md-4 col-lg-5"><img src="' + img_data + '" alt=""></div><div class="col-8 col-sm-7 col-md-8 col-lg-7"><div class="details"><span class="name">' + pdata.Records[i].firstname + ' ' + pdata.Records[i].lastname + '</span><span class="age">' + pdata.Records[i].experienceinyears + ' years ' + pdata.Records[i].experienceinmonths + ' months ' + '</span></div><div class="details"><span class="label">Services offered</span><span class="value">' + servicesAsString + '</span></div><div class="details"><span class="label">Available from</span><span class="value">' + formattedDate + '</span></div><a onclick="onViewDetails(\'' + pdata.Records[i].id + '\')" class="btn btn-view-details">View Details</a></div></div></div></div>';
                }
                divrow.innerHTML = inner_html;
            }
        });
    }

    //document.addEventListener('DOMContentLoaded', function () {
    //    var dropdown = document.getElementById("subcity");
    //    dropdown.addEventListener('change', function () {
    //        var selectedValue = dropdown.value;
    //        console.log("Selected value: " + selectedValue);
    //    });
    //});

    function onSearch(event) {
        debugger;
        const serviceCheckboxes = document.querySelectorAll('input[name="services"]:checked');
        const languageCheckboxes = document.querySelectorAll('input[name="language"]:checked');
        const workingCheckboxes = document.querySelectorAll('input[name="working"]:checked');

        const selectedValues = {
            gender: [],
            services: [],
            language: [],
            working: [],
        };

        serviceCheckboxes.forEach(checkbox => {
            selectedValues.services.push(checkbox.value);
            console.log(checkbox.value);
        });

        languageCheckboxes.forEach(checkbox => {
            selectedValues.language.push(checkbox.value);
            console.log(checkbox.value);
        });

        workingCheckboxes.forEach(checkbox => {
            selectedValues.working.push(checkbox.value);
            console.log(checkbox.value);
        });

        const value = event.target.value;
        const name = event.target.name;
        //const message = document.getElementById('message');
        //message.textContent = `Event: ${name} You entered: ${value}`;

        let obj = new Object();
        obj.Gender = selectedValues.gender;
        obj.Services = selectedValues.services;
        obj.Language = selectedValues.language;
        obj.Working = selectedValues.working;
        obj.IsSaveSearch = document.getElementById("isSaveSearch").checked;
        if (name == 'community') {
            obj.Community = $('#community').val();
        }
        if (name == 'location') {
            obj.Location = $('#location').val();
        }

        $.ajax({
            url: "/business/home/search",
            data: obj,
            cache: true,
            type: "POST",
            success: function (data) {
                var divrow = document.getElementById("search_row");
                divrow.innerHTML = "";

                var div = document.getElementById("search_result");
                div.style.display = "block";

                pdata = JSON.parse(data);
                var inner_html = "";
                for (var i = 0; i < pdata.Records.length; i++) {
                    let servicesAsArray = JSON.parse(pdata.Records[i].services);
                    const servicesAsString = servicesAsArray.join(', ');

                    const img_data = "data:image/;base64," + pdata.Records[i].filedata;

                    let date = new Date(pdata.Records[i].availablefrom);
                    let day = ("0" + date.getDate()).slice(-2);
                    let month = ("0" + (date.getMonth() + 1)).slice(-2);
                    let year = date.getFullYear();
                    let formattedDate = day + "-" + month + "-" + year;

                    inner_html = inner_html + '<div class="col-md-6 col-lg-4 d-flex align-items-stretch "><div class="maidcard"><div class="row"><div class="col-4 col-sm-5 col-md-4 col-lg-5"><img src="' + img_data + '" alt=""><div class="rating"><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_grey.svg" alt=""></div><div class="review"><a href="#">12 reviews</a></div></div><div class="col-8 col-sm-7 col-md-8 col-lg-7"><div class="details"><span class="name">' + pdata.Records[i].firstname + ' ' + pdata.Records[i].lastname + '</span><span class="age">' + pdata.Records[i].experienceinyears + ' years ' + pdata.Records[i].experienceinmonths + ' months ' + '</span></div><div class="details"><span class="label">Services offered</span><span class="value">' + servicesAsString + '</span></div><div class="details"><span class="label">Available from</span><span class="value">' + formattedDate + '</span></div><a onclick="onViewDetails(\'' + pdata.Records[i].id + '\')" class="btn btn-view-details">View Details</a></div></div></div></div>';
                }
                divrow.innerHTML = inner_html;
            }
        });

    }

    function onSearchReal() {

        //const genderCheckboxes = document.querySelectorAll('input[name="gender"]:checked');
        const serviceCheckboxes = document.querySelectorAll('input[name="services"]:checked');
        const languageCheckboxes = document.querySelectorAll('input[name="language"]:checked');
        const workingCheckboxes = document.querySelectorAll('input[name="working"]:checked');

        const selectedValues = {
            gender: [],
            services: [],
            language: [],
            working: [],
        };

        //genderCheckboxes.forEach(checkbox => {
        //    selectedValues.gender.push(checkbox.value);
        //    console.log(checkbox.value);
        //});

        serviceCheckboxes.forEach(checkbox => {
            selectedValues.services.push(checkbox.value);
            console.log(checkbox.value);
        });

        languageCheckboxes.forEach(checkbox => {
            selectedValues.language.push(checkbox.value);
            console.log(checkbox.value);
        });

        workingCheckboxes.forEach(checkbox => {
            selectedValues.working.push(checkbox.value);
            console.log(checkbox.value);
        });

        let obj = new Object();
        obj.Gender = selectedValues.gender;
        obj.Services = selectedValues.services;
        obj.Language = selectedValues.language;
        obj.Working = selectedValues.working;
        obj.IsSaveSearch = document.getElementById("isSaveSearch").checked;
        obj.Community = $('#community').val();
        obj.Location = $('#location').val();

        $.ajax({
            url: "/business/home/search",
            data: obj,
            cache: true,
            type: "POST",
            success: function (data) {
                var divrow = document.getElementById("search_row");
                divrow.innerHTML = "";

                var div = document.getElementById("search_result");
                div.style.display = "block";

                pdata = JSON.parse(data);
                var inner_html = "";
                for (var i = 0; i < pdata.Records.length; i++) {
                    let servicesAsArray = JSON.parse(pdata.Records[i].services);
                    const servicesAsString = servicesAsArray.join(', ');

                    const img_data = "data:image/;base64," + pdata.Records[i].filedata;

                    let date = new Date(pdata.Records[i].availablefrom);
                    let day = ("0" + date.getDate()).slice(-2);
                    let month = ("0" + (date.getMonth() + 1)).slice(-2);
                    let year = date.getFullYear();
                    let formattedDate = day + "-" + month + "-" + year;

                    inner_html = inner_html + '<div class="col-md-6 col-lg-4 d-flex align-items-stretch "><div class="maidcard"><div class="row"><div class="col-4 col-sm-5 col-md-4 col-lg-5"><img src="' + img_data + '" alt=""><div class="rating"><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_green.svg" alt=""><img src="/content-mfolio/images/Star_grey.svg" alt=""></div><div class="review"><a href="#">12 reviews</a></div></div><div class="col-8 col-sm-7 col-md-8 col-lg-7"><div class="details"><span class="name">' + pdata.Records[i].firstname + ' ' + pdata.Records[i].lastname + '</span><span class="age">' + pdata.Records[i].experienceinyears + ' years ' + pdata.Records[i].experienceinmonths + ' months ' + '</span></div><div class="details"><span class="label">Services offered</span><span class="value">' + servicesAsString + '</span></div><div class="details"><span class="label">Available from</span><span class="value">' + formattedDate + '</span></div><a onclick="onViewDetails(\'' + pdata.Records[i].id + '\')" class="btn btn-view-details">View Details</a></div></div></div></div>';
                }
                divrow.innerHTML = inner_html;

                //console.log(data);
            }
        });
    }

    function onViewDetails(id) {
        window.location.href = "/business/home/maiddetails/" + id;
    }

    document.addEventListener("DOMContentLoaded", function () {
        var selectedLanguage = document.getElementById("language");
        selectedLanguage.value = "";
    });

    document.addEventListener("DOMContentLoaded", function () {
        var selectedWorkinghours = document.getElementById("workinghours");
        selectedWorkinghours.value = "";
    });

    document.addEventListener("DOMContentLoaded", function () {
        var selectedServices = document.getElementById("services");
        selectedServices.value = "";
    });

    document.addEventListener("DOMContentLoaded", function () {
        var selectedServices = document.getElementById("subcity");
        selectedServices.value = "";
    });
</script>
